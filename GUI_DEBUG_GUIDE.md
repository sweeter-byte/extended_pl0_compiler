# PL/0 GUI 调试器使用指南

本指南介绍如何使用 PL/0 GUI 调试器进行程序调试。

## 功能概览

| 功能 | 描述 |
|------|------|
| **断点** | 点击行号设置/取消断点（红色圆点） |
| **单步执行** | F8 逐行执行代码 |
| **继续运行** | F9 运行至下一个断点 |
| **停止调试** | Shift+F7 终止调试会话 |
| **变量监视** | 实时显示所有变量的当前值 |
| **栈可视化** | ASCII 图形显示运行时栈结构 |

## 快速开始

### 1. 打开并编译程序

1. 启动 `pl0gui`
2. 打开 PL/0 源文件（File → Open）
3. 按 **F5** 编译程序

### 2. 设置断点

- **点击行号区域**：在需要暂停的代码行点击左侧行号
- 断点显示为**红色圆点**
- 再次点击可取消断点

### 3. 启动调试

- 按 **F7** 或点击 "Start Debug" 开始调试
- 程序将在第一条可执行语句处暂停

### 4. 调试控制

| 快捷键 | 操作 | 说明 |
|--------|------|------|
| **F8** | Step | 执行一行代码 |
| **F9** | Continue | 运行至下一个断点 |
| **Shift+F7** | Stop | 停止调试 |

## 调试面板详解

调试时，右侧面板自动切换到 **Debug** 标签页，显示：

### 寄存器信息

```
PC: 12    BP: 3    SP: 8
```

- **PC**: 程序计数器（当前指令地址）
- **BP**: 基址指针（当前栈帧基址）
- **SP**: 栈指针（栈顶位置）

### 变量监视

显示所有变量的实时值：

| 名称 | 类型 | 地址 | 值 |
|------|------|------|-----|
| x | VAR | 6 | 42 |
| arr | ARRAY[5] | 7 | [1,2,3,4,5] |
| ptr | PTR | 12 | → 156 (*=10) |

- **数组**：显示为可展开的树形结构，每个元素单独显示
- **指针**：显示目标地址和解引用值

### 运行时栈

ASCII 图形化显示栈结构：

```
┌─────────────────────────────┐
│       RUNTIME STACK         │
├─────────────────────────────┤
│ [8] ← TOP: 42               │  ← 栈顶
│ [7]       10                │
│ [6]       5                 │
│ [5]       3                 │
│ [3] ← BP:  0  (SL)          │  ← 静态链接
│ [4]       0  (DL)           │  ← 动态链接
│ [5]       0  (RA)           │  ← 返回地址
├─────────────────────────────┤
│ Heap pointer H = 1000       │
└─────────────────────────────┘
```

## 输入处理

当程序执行到 `read` 语句时：
1. 控制台显示提示信息
2. 在控制台底部输入框输入数值
3. 按 Enter 提交输入
4. 程序继续执行

## 注意事项

- 调试前必须先编译（F5）
- 修改代码后需重新编译才能调试
- 断点在编译后仍然保留
- 调试过程中代码编辑器为只读状态

## 常见问题

**Q: 程序执行无响应？**  
A: 可能在等待输入，检查控制台提示。
